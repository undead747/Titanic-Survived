setwd("~/Downloads/R workspace/titanic")
#Load raw data
train <- read.csv("train.csv", header = TRUE)
test <- read.csv("test.csv", header = TRUE)
#survived <- subset.data.frame(train , Survived == 1)
#notSurvived <- subset.data.frame(train, Survived == 0)
#------------------------------------------ data table examinate -----------------------------------------
#Add a "Survived" to the test set to allow for combining data sets
#Make a new variable and call it "test.survived", after that create a new data.frame with have a combine of
# bunch of column name survived with have "None" varible and all the variable of test.csv
test.survived <- data.frame(Survived = rep("None",nrow(test)),test[,])
test.survived <- test.survived[,c(2,1,3,4,5,6,7,8,9,10,11,12)]
#Combine data sets
data.combined <- rbind(train, test.survived)
#------------------------------------------ end data table examinate -----------------------------------------
#A bit about R data types
str(data.combined)
#Factors are the data objects which are used to categorize the data and store it as levels.
#They can store both strings and integers. They are useful in the columns which have a
#limited number of unique values. Like "Male, "Female" and True, False etc. They are useful
#in data analysis for statistical modeling.
# On creating any data frame with a column of text data,
# R treats the text column as categorical data and creates factors on it.
data.combined$Survived <- as.factor(data.combined$Survived)
data.combined$Pclass <- as.factor(data.combined$Pclass)
#Take a look at gross survival rates
table(data.combined$Survived)
table(data.combined$Pclass)
#Load up gglot2 package to use for viusualization
library(ggplot2)
#convert data into factor
train$Pclass <- factor(train$Pclass)
train$Sex <- factor(train$Sex)
train$Embarked <- factor(train$Embarked)
train$Survived <- factor(train$Survived)
#---------------------------------------------------- ggplot 2 ------------------------------------------
ggplot(train, aes(x = Survived)) + geom_bar()
prop.table(table(train$Survived))
ggplot(train, aes(x = Survived)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survival Rates"
)
ggplot(train, aes(x = Sex)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survival Rates"
)
ggplot(train, aes(x = Age)) +
theme_light() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survival Rates"
)
ggplot(survived, aes(x = Sex)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survived Passeger Rates By Sex"
)
ggplot(notSurvived, aes(x = Sex)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Did Not Survived Passeger Rates By Sex"
)
ggplot(train, aes(x = Sex,fill = Survived)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survival Rates"
)
ggplot(train, aes(x = Pclass,fill = Survived)) +
theme_bw() +
geom_bar() +
labs( y = "Passeger count",
title = "titanic Survival Rates"
)
ggplot(train, aes(x = Sex, fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap( ~ Pclass) +
labs( y = "Passeger Count",
title = "Titanic Survival Rates By  Pclass and Sex"
)
ggplot(train, aes(x = Sex)) +
theme_bw() +
geom_bar() +
facet_wrap( ~ Survived) +
labs( y = "Passeger Count",
title = "Titanic Survival Rates By Sex"
)
ggplot(train, aes(x = Age)) +
theme_bw() +
geom_histogram(binwidth =  5) +
labs(y = "Passeger Count",
x = "Age With Binwidth = 5",
title = "Titanic Age Distribtion"
)
ggplot(train, aes(x = Age, fill = Survived)) +
theme_bw() +
geom_histogram(binwidth =  5) +
labs(y = "Passeger Count",
x = "Age With Binwidth = 5",
title = "Titanic Age Distribtion"
)
ggplot(train, aes(x = Age, fill = Survived)) +
theme_bw() +
facet_wrap(Sex ~ Pclass) +
geom_density(alpha = 0.5) +
labs(y = "Age",
x = "Survived",
title = "Titanic survival Rates by Age, Pclass and Sex"
)
ggplot(train, aes(x = Age, fill = Survived)) +
theme_bw() +
facet_wrap(Sex ~ Pclass) +
geom_histogram(binwidth = 5) +
labs(y = "Age",
x = "Survived",
title = "Titanic survival Rates by Age, Pclass and Sex"
)
#Hypothesis - Rich folks survived at higher rate
ggplot(train,aes(x = Pclass, fill = Survived)) +
theme_bw() +
geom_bar() +
labs(x = "Class",
y = "Total Passager",
title = "Titanic Rate By Class and Survival"
)
#---------------------------------------------------- end of ggplot 2 ------------------------------------------
#--------------------------------------------------- Get the ms mrs mr from data.combined ---------------------
#examine the first few names in the training data set
head(as.character(train$Name))
#How many unique name are there across both train and test
length(unique(as.character(data.combined$Name)))
#Get the duplicate names and store them as a vector
dup.names <- as.character(data.combined[which(duplicated(as.character(data.combined$Name))), "Name"])
table(dup.names)
#Take a look at the records in data set
data.combined[which(data.combined$Name %in% dup.names),]
library(stringr)
#Any correlation with other varibable(e.g, sibsp) ?
misses <- data.combined[which(str_detect(data.combined$Name, "Miss.")), ]
misses[1:5,]
mres <- data.combined[which(str_detect(data.combined$Name, "Mrs.")),]
mres[1:5,]
male <- data.combined[which(train$Sex == "male"),]
male[1:5,]
#--------------------------------------------------- End Get the ms mrs mr from data.combined ---------------------
#Expand upon the relationship between 'Survived' and "Pclass" by adding the new "Title" variable
#---------------------------------------------------- Create the column Title --------------------------------------
#Create the unity fuction to help with title extraction
extractTitle <- function(name) {
name <- as.character(name)
if(length(grep("Miss.", name)) > 0){
return ("Miss.")
}else if(length(grep("Master.", name)) > 0){
return ("Master.")
}else if(length(grep("Mrs.", name)) > 0){
return ("Mrs")
}else if(length(grep("Mr.", name)) > 0){
return ("Mr")
}else {
return ("Other")
}
}
titles <- NULL
for(i in 1:nrow(data.combined)) {
titles <- c(titles, extractTitle(data.combined[i,"Name"]))
}
data.combined$title <- factor(titles)
#---------------------------------------------------- End of Create the column Title --------------------------------------
ggplot(data.combined[1:891,], aes(x = title,fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap( ~ Pclass) +
labs( x = "Title",
y = "Total Passager",
title = "Title"
)
#What's the distribution of felmales to males across train & test ?
table(data.combined$Sex)
?ggplot
ggplot(data.combined, aes(x = sex, fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap(~ Pclass) +
labs(x = "Sex",
y = "Total Count",
title = "Rate Survival by Sex and Pclass"
)
ggplot(data.combined, aes(x = Sex, fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap(~ Pclass) +
labs(x = "Sex",
y = "Total Count",
title = "Rate Survival by Sex and Pclass"
)
ggplot(data.combined[1:891,], aes(x = Sex, fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap(~ Pclass) +
labs(x = "Sex",
y = "Total Count",
title = "Rate Survival by Sex and Pclass"
)
#What's the distribution of felmales to males across train & test ?
table(data.combined$Sex)
ggplot(data.combined[1:891,], aes(x = Sex, fill = Survived)) +
theme_bw() +
geom_bar() +
facet_wrap(~ Pclass) +
labs(x = "Sex",
y = "Total Count",
title = "Rate Survival by Sex and Pclass"
)
summary(data.combined$Age)
ggplot(data.combined[1:891,], aes(x = Age, fill = Survived)) +
theme_bw() +
geom_histogram(binwidth = 10) +
facet_wrap(~ Pclass) +
labs( x = "Age",
y = "Total Passager"
)
summary(data.combined$Age)
summary(data.combined[1:891,]$Age)
ggplot(data.combined[1:891,], aes(x = Age, fill = Survived)) +
theme_bw() +
geom_histogram(binwidth = 10) +
facet_wrap(Sex ~ Pclass) +
labs( x = "Age",
y = "Total Passager"
)
ggplot(data.combined[1:891,], aes(x = Age, fill = Survived)) +
theme_bw() +
geom_histogram(binwidth = 10) +
facet_wrap(~ Sex + Pclass) +
labs( x = "Age",
y = "Total Passager"
)
which(data.combined$title == "Master."
data.combined[which(data.combined$title == "Master."),]
#Validate that "Master." is a good proxy for male children
boys <- data.combined[which(data.combined$title == "Master."),]
View(boys)
#Validate that "Master." is a good proxy for male children
boys <- data.combined[which(data.combined$title == "Master."),]
summary(boys)
#Validate that "Master." is a good proxy for male children
boys <- data.combined[which(data.combined$title == "Master."),]
summary(boys$Age)
#Look at the distibution of age over entire date set
summary(data.combined$Age)
summary(data.combined[1:891,]$Age)
summary(male$Age)
summary(misses$Age)
summary(male$Age)
ggplot(misses[misses$Survived != "None",],aes(x = Age,fill = Survived)) +
facet_wrap(~Pclass) +
geom_histogram(binwidth = 5) +
labs( x = "Age",
y = "Total Count" +
title = "Age for Miss by Pclass"
)
ggplot(misses[misses$Survived != "None",],aes(x = Age,fill = Survived)) +
facet_wrap(~Pclass) +
geom_histogram(binwidth = 5) +
labs( x = "Age",
y = "Total Count",
title = "Age for Miss by Pclass"
)
